// Circular Â© 2014 Andrey Polischuk
// https://github.com/andrepolischuk/circular
!function(a){"use strict";function c(c){c.mouse=c.mouse||!0,c.scroll=c.scroll||!1,c.vertical=c.vertical||!1,c.reverse=c.reverse||!1,c.cycle=c.cycle||!1,c.interval=c.interval||25;var l,d=this.el=document.getElementById(c.element),e=c.loader?document.getElementById(c.loader):a,f=this.length=d.getElementsByTagName("img").length,g=c.height||a,h=c.width||a,i=!1,j=[],k=[],m={};m.Y=null,m.X=null,m.frame=0;var n={};n.success=c.success||a,n.error=c.error||a,n.change=c.change||a;var o=function(a){a=a||window.event,a.preventDefault?a.preventDefault():a.returnValue=!1,a="touchstart"===a.type?a.changedTouches[0]:a,i=!0,c.vertical?m.Y=a.clientY-d.offsetTop:m.X=a.clientX-d.offsetLeft},p=function(a){return 0>a?a=c.cycle?a+f:0:a>f-1&&(a=c.cycle?a-f:f-1),a},q=function(a){if(i){a=a||window.event,a.preventDefault?a.preventDefault():a.returnValue=!1,a="touchmove"===a.type?a.changedTouches[0]:a;var b=c.vertical?a.clientY-d.offsetTop-m.Y:a.clientX-d.offsetLeft-m.X;b=c.reverse?-b:b;var e=h/f,g=l;b=Math.floor(b/e),b!==l&&(l=p(m.frame+b),g!==l&&(d.getElementsByTagName("img")[g].style.display="none",d.getElementsByTagName("img")[l].style.display="block","function"==typeof n.change&&n.change(l,f)))}},r=function(a){a=a||window.event,a.preventDefault?a.preventDefault():a.returnValue=!1,i=!1,m.frame=l},s=function(a){a=a||window.event,a.preventDefault?a.preventDefault():a.returnValue=!1;var b=a.deltaY||a.detail||-a.wheelDelta;b/=Math.abs(b),b=c.reverse?-b:b,l=p(l+b),d.getElementsByTagName("img")[m.frame].style.display="none",d.getElementsByTagName("img")[l].style.display="block",m.frame=l,"function"==typeof n.change&&n.change(l,f)},t=function(){e&&(e.style.display="none"),0===k.length?(d.getElementsByTagName("img")[0].style.display="block",l=0,d.style.position="relative",d.style.width="100%","ontouchstart"in window||"onmsgesturechange"in window?(c.mouse||c.scroll)&&(d.addEventListener("touchstart",o,!1),d.addEventListener("touchmove",q,!1),d.addEventListener("touchend",r,!1)):(c.mouse&&(d.onmousedown=o,d.onmousemove=q,document.onmouseup=r),c.scroll&&("function"==typeof window.addEventListener?"onwheel"in window?d.addEventListener("wheel",s,!1):"onmousewheel"in window?d.addEventListener("mousewheel",s,!1):"onscroll"in window?d.addEventListener("scroll",s,!1):d.addEventListener("DOMMouseScroll",s,!1):c.scroll&&d.attachEvent("onmousewheel",s))),"function"==typeof n.success&&n.success()):"function"==typeof n.error&&n.error(k)},u=function(a){a.onload=function(){j.push(this.src),j.length+k.length===f&&t()},a.onerror=function(){k.push(this.src),j.length+k.length===f&&t()},a.onreadystatechange=function(){this.onload()}},v=function(){var a;e&&(e.style.display="block");for(var b=0;f>b;b++)a=d.getElementsByTagName("img")[b],a.style.display="none",a.style.width="100%",a.setAttribute("src",a.getAttribute("data-src")),a.setAttribute("data-index",b),a.removeAttribute("data-src"),u(a);g=g||d.clientHeight,h=h||d.clientWidth};v();var w=function(a){d.getElementsByTagName("img")[l].style.display="none",d.getElementsByTagName("img")[a].style.display="block",m.frame=l=a};this.turn=function(a){a=p(a),function b(){a!==l?(w(p(l+1)),setTimeout(b,c.interval)):a===l&&(m.frame=l=a,"function"==typeof n.change&&n.change(l,f))}()},this.go=function(a){a!==l&&(w(a),"function"==typeof n.change&&n.change(l,f))},this.show=function(){d.style.display="block"},this.hide=function(){d.style.display="none"},this.set=function(a){for(var d in a)if(a.hasOwnProperty(d)){for(var e=0;e<b.options.length;e++)d===b.options[e]&&(c[d]=a[d]);for(var f=0;f<b.callbacks.length;f++)d===b.callbacks[f]&&(n[d]=a[d])}}}function d(a,b){return b=b||{},b.element=a,new c(b)}var b={};b.options=["vertical","reverse","cycle","interval"],b.callbacks=["success","error","change"],"function"==typeof define&&define.amd?define([],function(){return d}):"undefined"!=typeof module&&module.exports?module.exports=d:this.circular=d}.call(this);
