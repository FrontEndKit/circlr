// Circular Â© 2014 Andrey Polischuk
// https://github.com/andrepolischuk/circular
!function(){"use strict";function b(b){function o(a){a.preventDefault?a.preventDefault():a.returnValue=!1}function p(a){c=!1,a=a||window.event,o(a),a="touchstart"===a.type?a.changedTouches[0]:a,i=!0,b.vertical?m.Y=a.clientY-d.offsetTop:m.X=a.clientX-d.offsetLeft}function q(a){return 0>a?a=b.cycle?a+f:0:a>f-1&&(a=b.cycle?a-f:f-1),a}function r(a){if(i){a=a||window.event,o(a),a="touchmove"===a.type?a.changedTouches[0]:a;var c=b.vertical?a.clientY-d.offsetTop-m.Y:a.clientX-d.offsetLeft-m.X;c=b.reverse?-c:c;var e=h/f,g=l;c=Math.floor(c/e),c!==l&&(l=q(m.frame+c),g!==l&&(d.getElementsByTagName("img")[g].style.display="none",d.getElementsByTagName("img")[l].style.display="block","function"==typeof n.change&&n.change(l,f)))}}function s(a){a=a||window.event,o(a),i=!1,m.frame=l}function t(a){c=!1,a=a||window.event,o(a);var e=a.deltaY||a.detail||-a.wheelDelta;e/=Math.abs(e),e=b.reverse?-e:e,l=q(l+e),d.getElementsByTagName("img")[m.frame].style.display="none",d.getElementsByTagName("img")[l].style.display="block",m.frame=l,"function"==typeof n.change&&n.change(l,f)}function u(){if(e&&(e.style.display="none"),0===k.length){var a=q(b.start);d.getElementsByTagName("img")[a].style.display="block",l=a,d.style.position="relative",d.style.width="100%","ontouchstart"in window||"onmsgesturechange"in window?(b.mouse||b.scroll)&&(d.addEventListener("touchstart",p,!1),d.addEventListener("touchmove",r,!1),d.addEventListener("touchend",s,!1)):(b.mouse&&(d.onmousedown=p,d.onmousemove=r,document.onmouseup=s),b.scroll&&("function"==typeof window.addEventListener?"onwheel"in window?d.addEventListener("wheel",t,!1):"onmousewheel"in window?d.addEventListener("mousewheel",t,!1):"onscroll"in window?d.addEventListener("scroll",t,!1):d.addEventListener("DOMMouseScroll",t,!1):b.scroll&&d.attachEvent("onmousewheel",t))),c&&z()}"function"==typeof n.ready&&n.ready(k)}function v(a){a.onload=function(){j.push(this.src),j.length+k.length===f&&u()},a.onerror=function(){k.push(this.src),j.length+k.length===f&&u()},a.onreadystatechange=function(){this.onload()}}function w(){var a;e&&(e.style.display="block");for(var b=0;f>b;b++)a=d.getElementsByTagName("img")[b],a.style.display="none",a.style.width="100%",a.setAttribute("src",a.getAttribute("data-src")),a.setAttribute("data-index",b),a.removeAttribute("data-src"),v(a);g=g||d.clientHeight,h=h||d.clientWidth}function x(a){d.getElementsByTagName("img")[l].style.display="none",d.getElementsByTagName("img")[a].style.display="block",m.frame=l=a}b.mouse=b.mouse||!0,b.scroll=b.scroll||!1,b.vertical=b.vertical||!1,b.reverse=b.reverse||!1,b.cycle=b.cycle||!0,b.start=b.start||0,b.speed=b.speed||50;var c=b.autoplay||!1;b.playSpeed=b.playSpeed||100;var d=this.el=b.element;d.setAttribute("data-circular",!0);var l,e=b.loader?document.getElementById(b.loader):void 0,f=this.length=d.getElementsByTagName("img").length,g=b.height||void 0,h=b.width||void 0,i=!1,j=[],k=[],m={};m.Y=null,m.X=null,m.frame=0;var n={};n.ready=b.ready||void 0,n.change=b.change||void 0,w();var y=this.turn=function(a){a=q(a),c=!0,function d(){a!==l&&c?(x(q(l>a?l-1:l+1)),setTimeout(d,"undefined"==typeof a?b.playSpeed:b.speed)):a===l&&(m.frame=l=a,c=!1,"function"==typeof n.change&&n.change(l,f))}()};this.go=function(a){a!==l&&(x(a),"function"==typeof n.change&&n.change(l,f))};var z=this.play=function(){c=!0,y()};this.stop=function(){c=!1},this.show=function(){d.style.display="block"},this.hide=function(){d.style.display="none"},this.set=function(c){for(var e,d=0;d<a.length;d++)e=a[d],b[e]="undefined"!=typeof c[e]?c[e]:b[e]}}function c(a,c){return a=document.getElementById(a),a.getAttribute("data-circular")?void 0:(c=c||{},c.element=a,new b(c))}var a=["vertical","reverse","cycle","speed","playSpeed"];"function"==typeof define&&define.amd?define([],function(){return c}):"undefined"!=typeof module&&module.exports?module.exports=c:this.circular=c}.call(this);
