// Circular Â© 2014 Andrey Polischuk
// https://github.com/andrepolischuk/circular
!function(a){"use strict";var b={};b.options=["vertical","reverse","cycle","interval"],b.callbacks=["success","error","change"];var c=function(c,d){d=d||{},d.mouse=d.mouse||!0,d.scroll=d.scroll||!1,d.vertical=d.vertical||!1,d.reverse=d.reverse||!1,d.cycle=d.cycle||!1,d.interval=d.interval||25;var m,e=this.el=document.getElementById(c),f=d.loader?document.getElementById(d.loader):a,g=this.length=e.getElementsByTagName("img").length,h=d.height||a,i=d.width||a,j=!1,k=[],l=[],n={};n.Y=null,n.X=null,n.frame=0;var o={};o.success=d.success||a,o.error=d.error||a,o.change=d.change||a;var p=function(a){a=a||window.event,a.preventDefault?a.preventDefault():a.returnValue=!1,a="touchstart"===a.type?a.changedTouches[0]:a,j=!0,d.vertical?n.Y=a.clientY-e.offsetTop:n.X=a.clientX-e.offsetLeft},q=function(a){return 0>a?a=d.cycle?a+g:0:a>g-1&&(a=d.cycle?a-g:g-1),a},r=function(a){if(j){a=a||window.event,a.preventDefault?a.preventDefault():a.returnValue=!1,a="touchmove"===a.type?a.changedTouches[0]:a;var b=d.vertical?a.clientY-e.offsetTop-n.Y:a.clientX-e.offsetLeft-n.X;b=d.reverse?-b:b;var c=i/g,f=m;b=Math.floor(b/c),b!==m&&(m=q(n.frame+b),f!==m&&(e.getElementsByTagName("img")[f].style.display="none",e.getElementsByTagName("img")[m].style.display="block","function"==typeof o.change&&o.change(m,g)))}},s=function(a){a=a||window.event,a.preventDefault?a.preventDefault():a.returnValue=!1,j=!1,n.frame=m},t=function(a){a=a||window.event,a.preventDefault?a.preventDefault():a.returnValue=!1;var b=a.deltaY||a.detail||-a.wheelDelta;b/=Math.abs(b),b=d.reverse?-b:b,m=q(m+b),e.getElementsByTagName("img")[n.frame].style.display="none",e.getElementsByTagName("img")[m].style.display="block",n.frame=m,"function"==typeof o.change&&o.change(m,g)},u=function(){f&&(f.style.display="none"),0===l.length?(e.getElementsByTagName("img")[0].style.display="block",m=0,e.style.position="relative",e.style.width="100%","ontouchstart"in window||"onmsgesturechange"in window?(d.mouse||d.scroll)&&(e.addEventListener("touchstart",p,!1),e.addEventListener("touchmove",r,!1),e.addEventListener("touchend",s,!1)):(d.mouse&&(e.onmousedown=p,e.onmousemove=r,document.onmouseup=s),d.scroll&&("function"==typeof window.addEventListener?"onwheel"in window?e.addEventListener("wheel",t,!1):"onmousewheel"in window?e.addEventListener("mousewheel",t,!1):"onscroll"in window?e.addEventListener("scroll",t,!1):e.addEventListener("DOMMouseScroll",t,!1):d.scroll&&e.attachEvent("onmousewheel",t))),"function"==typeof o.success&&o.success()):"function"==typeof o.error&&o.error(l)},v=function(a){a.onload=function(){k.push(this.src),k.length+l.length===g&&u()},a.onerror=function(){l.push(this.src),k.length+l.length===g&&u()},a.onreadystatechange=function(){this.onload()}},w=function(){var a;f&&(f.style.display="block");for(var b=0;g>b;b++)a=e.getElementsByTagName("img")[b],a.style.display="none",a.style.width="100%",a.setAttribute("src",a.getAttribute("data-src")),a.setAttribute("data-index",b),a.removeAttribute("data-src"),v(a);h=h||e.clientHeight,i=i||e.clientWidth};w();var x=function(a){e.getElementsByTagName("img")[m].style.display="none",e.getElementsByTagName("img")[a].style.display="block",n.frame=m=a};this.turn=function(a){a=q(a),function b(){a!==m?(x(q(m+1)),setTimeout(b,d.interval)):a===m&&(n.frame=m=a,"function"==typeof o.change&&o.change(m,g))}()},this.go=function(a){a!==m&&(x(a),"function"==typeof o.change&&o.change(m,g))},this.show=function(){e.style.display="block"},this.hide=function(){e.style.display="none"},this.set=function(a){for(var c in a)if(a.hasOwnProperty(c)){for(var e=0;e<b.options.length;e++)c===b.options[e]&&(d[c]=a[c]);for(var f=0;f<b.callbacks.length;f++)c===b.callbacks[f]&&(o[c]=a[c])}}};"function"==typeof define&&define.amd?define([],function(){return c}):"undefined"!=typeof module&&module.exports?module.exports=c:this.Circular=c}.call(this);
