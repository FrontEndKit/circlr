// Circular Â© 2014 Andrey Polischuk
// https://github.com/andrepolischuk/circular
!function(a){"use strict";function c(c){c.mouse=c.mouse||!0,c.scroll=c.scroll||!1,c.vertical=c.vertical||!1,c.reverse=c.reverse||!1,c.cycle=c.cycle||!0,c.interval=c.interval||25;var d=c.autoplay||!1;c.playInterval=c.playInterval||100;var e=this.el=c.element;e.setAttribute("data-circular",!0);var m,f=c.loader?document.getElementById(c.loader):a,g=this.length=e.getElementsByTagName("img").length,h=c.height||a,i=c.width||a,j=!1,k=[],l=[],n={};n.Y=null,n.X=null,n.frame=0;var o={};o.ready=c.ready||a,o.change=c.change||a;var p=function(a){d=!1,a=a||window.event,a.preventDefault?a.preventDefault():a.returnValue=!1,a="touchstart"===a.type?a.changedTouches[0]:a,j=!0,c.vertical?n.Y=a.clientY-e.offsetTop:n.X=a.clientX-e.offsetLeft},q=function(a){return 0>a?a=c.cycle?a+g:0:a>g-1&&(a=c.cycle?a-g:g-1),a},r=function(a){if(j){a=a||window.event,a.preventDefault?a.preventDefault():a.returnValue=!1,a="touchmove"===a.type?a.changedTouches[0]:a;var b=c.vertical?a.clientY-e.offsetTop-n.Y:a.clientX-e.offsetLeft-n.X;b=c.reverse?-b:b;var d=i/g,f=m;b=Math.floor(b/d),b!==m&&(m=q(n.frame+b),f!==m&&(e.getElementsByTagName("img")[f].style.display="none",e.getElementsByTagName("img")[m].style.display="block","function"==typeof o.change&&o.change(m,g)))}},s=function(a){a=a||window.event,a.preventDefault?a.preventDefault():a.returnValue=!1,j=!1,n.frame=m},t=function(a){d=!1,a=a||window.event,a.preventDefault?a.preventDefault():a.returnValue=!1;var b=a.deltaY||a.detail||-a.wheelDelta;b/=Math.abs(b),b=c.reverse?-b:b,m=q(m+b),e.getElementsByTagName("img")[n.frame].style.display="none",e.getElementsByTagName("img")[m].style.display="block",n.frame=m,"function"==typeof o.change&&o.change(m,g)},u=function(){f&&(f.style.display="none"),0===l.length&&(e.getElementsByTagName("img")[0].style.display="block",m=0,e.style.position="relative",e.style.width="100%","ontouchstart"in window||"onmsgesturechange"in window?(c.mouse||c.scroll)&&(e.addEventListener("touchstart",p,!1),e.addEventListener("touchmove",r,!1),e.addEventListener("touchend",s,!1)):(c.mouse&&(e.onmousedown=p,e.onmousemove=r,document.onmouseup=s),c.scroll&&("function"==typeof window.addEventListener?"onwheel"in window?e.addEventListener("wheel",t,!1):"onmousewheel"in window?e.addEventListener("mousewheel",t,!1):"onscroll"in window?e.addEventListener("scroll",t,!1):e.addEventListener("DOMMouseScroll",t,!1):c.scroll&&e.attachEvent("onmousewheel",t))),d&&z()),"function"==typeof o.ready&&o.ready(l)},v=function(a){a.onload=function(){k.push(this.src),k.length+l.length===g&&u()},a.onerror=function(){l.push(this.src),k.length+l.length===g&&u()},a.onreadystatechange=function(){this.onload()}},w=function(){var a;f&&(f.style.display="block");for(var b=0;g>b;b++)a=e.getElementsByTagName("img")[b],a.style.display="none",a.style.width="100%",a.setAttribute("src",a.getAttribute("data-src")),a.setAttribute("data-index",b),a.removeAttribute("data-src"),v(a);h=h||e.clientHeight,i=i||e.clientWidth};w();var x=function(a){e.getElementsByTagName("img")[m].style.display="none",e.getElementsByTagName("img")[a].style.display="block",n.frame=m=a},y=this.turn=function(a){a=q(a),d=!0,function b(){a!==m&&d?(x(q(m>a?m-1:m+1)),setTimeout(b,"undefined"==typeof a?c.playInterval:c.interval)):a===m&&(n.frame=m=a,d=!1,"function"==typeof o.change&&o.change(m,g))}()};this.go=function(a){a!==m&&(x(a),"function"==typeof o.change&&o.change(m,g))};var z=this.play=function(){d=!0,y()};this.stop=function(){d=!1},this.show=function(){e.style.display="block"},this.hide=function(){e.style.display="none"},this.set=function(a){for(var e,d=0;d<b.length;d++)e=b[d],c[e]="undefined"!=typeof a[e]?a[e]:c[e]}}function d(a,b){return a=document.getElementById(a),a.getAttribute("data-circular")?void 0:(b=b||{},b.element=a,new c(b))}var b=["vertical","reverse","cycle","interval"];"function"==typeof define&&define.amd?define([],function(){return d}):"undefined"!=typeof module&&module.exports?module.exports=d:this.circular=d}.call(this);
